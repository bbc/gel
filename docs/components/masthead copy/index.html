<!doctype html>
<html lang="en" class="b-pw-1280 b-reith-sans-font b-reith-serif-font no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/gel/static/images/favicon.ico" type="image/x-icon">

    <title>GEL | Masthead</title>
    <meta property="og:title" content="GEL Technical Guide: Masthead">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bbc.github.io/gel/">
    <meta property="og:image" content="https://bbc.github.io/gel/static/images/bbc-gel-logo.png">
    <meta property="og:description" content="Guidance for developers who wish to implement BBC GEL component patterns in ways that follow all BBC accessibility standards.">
    <meta property="og:locale" content="en_GB">
    <meta name="version_number" content="1.0">

    <script src="/gel/static/js/site.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <link rel="stylesheet" type="text/css" href="/gel/static/css/gel.css">
    <link rel="stylesheet" type="text/css" href="/gel/static/css/site.css">

    <script type="text/javascript"> // feature detects
        document.documentElement.className = document.documentElement.className.replace(' no-js', ' js');
        document.documentElement.className += (' ' + ('ontouchstart' in document.documentElement ? 'touch' : 'no-touch'));
        document.documentElement.className += (' ' + ('flexWrap' in document.documentElement.style ? 'flex' : 'no-flex'));
        document.documentElement.className += (' ' + ((document.createElementNS && 'createSVGRect' in document.createElementNS('http://www.w3.org/2000/svg', 'svg')) ? 'svg' : 'no-svg'));
    </script>

    <script type="text/javascript">
        try {
            (new FontFaceObserver('ReithSans', 5000)).load().then(function () {
                document.documentElement.className += ' b-reith-sans-loaded';
            });
            (new FontFaceObserver('ReithSerif', 5000)).load().then(function () {
                document.documentElement.className += ' b-reith-loaded';
            });
        } catch (e) {
            console.log('Reith fonts did not load within 5 seconds.');
        }
    </script>

    
</head>

<body class="geltags-body">
    <p class="gel-sr gel-sr__focusable gel-sr__overlay" tabindex="0">
        <a href="#main" onfocus="this.parentNode.classList.add('gel-sr__focused')"
            onblur="this.parentNode.classList.remove('gel-sr__focused')">Skip
            to content</a>
    </p>

    <header>
        <div class="geltags-header gs-u-clearfix">
            <div class="gel-wrap">
                <a href="http://www.bbc.co.uk/"><svg aria-label="BBC GEL Logo" width="100" height="24"
                        viewBox="0 0 100 24">
                        <title>BBC</title>
                        <image xlink:href="/gel/static/images/bbc-blocks_grey.svg"
                            src="/gel/static/images/bbc-blocks_grey.png" width="100%" height="100%"></image>
                    </svg></a>
            </div>
        </div>
        <div class="geltags-header__banner gs-u-clearfix">
            <div class="gel-wrap">
                <div class="gel-layout">
                    <div class="gel-layout__item gel-2/5@l"
                        style="text-align:left; padding-left:13px; margin-bottom:32px; margin-top: -12px;">
                        <a href="/gel/" class="geltags-logo"><img src="/gel/static/images/bbc-gel-logo.png" alt="BBC GEL, global experience language" style="max-width:169px;"></a>
                    </div>
                    
                </div>
            </div>
        </div>
    </header>

    <main id="main" tabindex="-1" class="gel-wrap gs-u-clearfix">
        <div class="gel-layout">
            <div class="gel-layout__item gel-1/5@l">
                <!-- column placeholder-->
            </div>

            <div class="gel-layout__item gel-2/5@l" style="padding-right: 12px;">
                <h1 class="geltags-header__title">Masthead</h1>
                <p class="geltags-header__summary gel-great-primer">The Masthead comprises the global navigation and a banner for the local site</p>
            </div>

            <div class="gel-layout__item gel-1/5@l">
                <dl class="geltags-standout-box">
                    
                    <dt>Version:</dt>
                    <dd>0.1.0</dd>
                    
                    <dt>Status:</dt>
                    <dd>Published</dd>
                </dl>
            </div>
        </div>

        <div class="gel-layout">
            <div class="gel-layout__item gel-1/5@l">
                <nav role="navigation" id="side-nav" class="gel-side-nav sticky" data-sticky-for="900"
                    style="padding-top:32px">
                    <div class="gel-pica gs-u-mb gs-u-mt0">Contents</div>
                    <ol id="geltags-toc__links" class="geltags-toc"><li><a href="#introduction">Introduction</a></li><li><a href="#recommended-markup">Recommended markup</a></li><li><a href="#recommended-layout">Recommended layout</a></li><li><a href="#recommended-behaviour">Recommended behaviour</a></li><li><a href="#reference-implementation">Reference implementation</a></li><li><a href="#related-research">Related research</a></li></ol>
                </nav>
            </div>

            <div class="geltags-sections geltags-body-copy gel-layout__item gel-3/5@l">
                <h2 id="introduction">Introduction</h2>
<p>The <strong>Masthead</strong> is an essential component for each of the pages of any BBC site. In order to be considered robust, it needs to work under a number of different circumstances:</p>
<ol>
<li><strong>No JavaScript:</strong> The functionality must be available to users whose browsers are not running JavaScript</li>
<li><strong>JavaScript but no <code>IntersectionObserver</code>:</strong> The <code>IntersectionObserver</code> API is the most efficient way to allot a suitable number of promoted navigation links within the available space. These links must still be available where the browser does not support <code>IntersectionObserver</code>.</li>
</ol>
<p>A number of responsive design and progressive enhancement techniques are employed to make the <strong>Masthead</strong> as inclusive as possible.</p>
<h2 id="recommended-markup">Recommended markup</h2>
<p>The <strong>Masthead</strong> is is divided into two main sections: the global navigation and the banner. The global navigation itself comprises of a number of components:</p>
<ol>
<li>The logo</li>
<li>The account and notifications controls</li>
<li>The promoted links list</li>
<li>The 'More' menu</li>
<li>The search functionality</li>
</ol>
<p>All of these components, including the banner, belong to a common <code>&lt;nav&gt;</code> element since they can all be considered navigation tools.</p>
<ol>
<li>The logo — <em>BBC home navigation link</em></li>
<li>The account and notifications controls — <em>navigation options for the current user</em></li>
<li>The promoted links list — <em>a set of common BBC sites one can navigate between</em></li>
<li>The 'More' menu - <em>a more complete set of BBC site navigation items</em></li>
<li>The search functionality - <em>locate and navigate to content within the site</em></li>
<li>The banner - <em>local site home link</em></li>
</ol>
<p>The <code>&lt;nav&gt;</code> itself represents a landmark, and includes a nested landmark in the use of <code>role=&quot;search&quot;</code> to wrap the search functionality. Each of these is available in aggregated landmark navigation provided by popular screen reader software<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p>
<p>A proxy label is provided using <code>aria-labelledby</code> and a hidden proxy element to differentiate this navigation region from the <a href="../site-menu"><strong>Site menu</strong></a> region, which is labeled <em>&quot;This site&quot;</em>.</p>
<pre><code class="prettyprint syntax-html">&lt;nav class=&quot;gel-masthead&quot; aria-labelledby=&quot;gel-masthead__label&quot;&gt;
  &lt;span id=&quot;gel-masthead__label&quot; hidden&gt;BBC sites&lt;/span&gt;
  &lt;!-- All masthead functionality --&gt;
&lt;/nav&gt;
</code></pre>
<h3 id="the-subcomponents-in-order">The subcomponents in order</h3>
<h4 id="the-logo">The logo</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__logo&quot;&gt;
  &lt;a href=&quot;https://bbc.co.uk&quot;&gt;
    &lt;span class=&quot;gel-sr&quot;&gt;BBC homepage&lt;/span&gt;
    &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
      &lt;use xlink:href=&quot;../../static/images/bbc-logo.svg#bbc-logo&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>The logo is provided as an inline SVG. This is preferable to a background image, which will be eliminated by some high contrast modes<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> in some browsers. Its <code>fill</code> is set to <code>currentColor</code> so that it honors Windows High Contrast Mode text colours. The visually hidden <code>&lt;span&gt;</code> reads <em>&quot;BBC homepage&quot;</em> and becomes the parent link's accessible label. The local home page link of the banner (see below) should be differentiated by mentioning the local site's name, for example <em>&quot;BBC Gel homepage&quot;</em>.</p>
<h4 id="the-account-link">The account link</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__account-option&quot;&gt;
  &lt;a href=&quot;https://account.bbc.com/account&quot;&gt;
    &lt;span class=&quot;gel-sr&quot;&gt;Your account,&lt;/span&gt;
    &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
      &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-sign-in&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
    &lt;span class=&quot;gel-masthead__account-text&quot;&gt;Heydon&lt;/span&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>This links to the user's account page. Note there is a parity between visual and non-visual experience across different viewports: At wider viewports, the label includes the user's name. This combines with the visually hidden text <em>&quot;Your account,&quot;</em> to form <em>&quot;Your account, Heydon&quot;</em> as the accessible label (available to screen readers). In smaller viewports, the user's name is removed with <code>display: none</code>, truncating the label to <em>&quot;Your account&quot;</em> to screen reader users.</p>
<p>All SVG icons must take <code>aria-hidden=&quot;true&quot;</code> to hide them from assistive technologies and <code>focusable=&quot;false&quot;</code> to ensure Microsoft browsers do not erroneously put them in focus order<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</p>
<h4 id="the-notificationsalerts-link">The notifications/alerts link</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__alerts-option&quot;&gt;
  &lt;a role=&quot;button&quot; aria-expanded=&quot;false&quot; aria-haspopup=&quot;true&quot; href=&quot;#gel-masthead__alerts&quot;&gt;
    &lt;span class=&quot;gel-sr&quot;&gt;Notifications&lt;/span&gt;
    &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
      &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-alerts&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>The alerts link, like the more link below, is an enhanced same-page link that both opens and sends focus to a target element containing more information/options. In the absence of JavaScript, the More menu is open by default and the link simply works as a same-page link. Where JavaScript runs, ARIA attribution is added to reflect that the link behaves as a toggle button, and keeps track of the expanded/collapsed state (<code>aria-expanded</code>).</p>
<h4 id="promotedpriority-links">Promoted/priority links</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__links&quot;&gt;
  &lt;span id=&quot;sites-label&quot; hidden&gt;BBC sites&lt;/span&gt;
  &lt;ul aria-labelledby=&quot;sites-label&quot;&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/news&quot;&gt;News&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/sport&quot;&gt;Sport&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/weather&quot;&gt;Weather&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/iplayer&quot;&gt;iPlayer&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/sounds&quot;&gt;Sounds&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/cbbc&quot;&gt;CBBC&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre>
<p>These are the main navigation options, grouped within a list so that screen reader software identifies them as related (and mutually exclusive) and numerates them<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>. They each pertain to a BBC site, and this is identified by an auxiliary group label provided to the list element via a hidden <code>&lt;span&gt;</code>. In the absence of JavaScript, the More menu offers a complete list of links. It's important, therefore, that each of these links is also available in the More menu.</p>
<h4 id="the-more-link">The more link</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__more-option&quot;&gt;
  &lt;a role=&quot;button&quot; aria-expanded=&quot;false&quot; aria-haspopup=&quot;true&quot; href=&quot;#gel-masthead__more&quot;&gt;
    &lt;span class=&quot;gel-sr&quot;&gt;More&lt;/span&gt;
    &lt;span class=&quot;gel-masthead__more-option-text&quot; aria-hidden=&quot;true&quot;&gt;
      More ▾
    &lt;/span&gt;
    &lt;svg class=&quot;gel-masthead__more-option-icon gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
      &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-list&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>The same-page link is enhanced into an ARIA toggle button where JavaScript is available (similar to the <strong>alerts link</strong>, above). Note the two instances of 'More'. The first, hidden visually, persistently offers the accessible label to the link. The second is removed from screen reader output with <code>aria-hidden=&quot;true&quot;</code> and provides a visible label only where the viewport can offer the space. The 'hamburger' icon replaces the visual text label at narrow viewports.</p>
<h4 id="the-search-link">The search link</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__search-option&quot; role=&quot;search&quot;&gt;
  &lt;a href=&quot;https://www.bbc.co.uk/search?q=&quot;&gt;
    &lt;span&gt;Search&lt;/span&gt;
    &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
      &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-search&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>The search link takes you to the main BBC search page. Note that, despite only containing this link, it is still within a <code>role=&quot;search&quot;</code> landmark. This way, it is easy for a screen reader user to locate the link via landmark navigation.</p>
<h4 id="the-more-menu">The more menu</h4>
<pre><code class="prettyprint syntax-html">&lt;div id=&quot;gel-masthead__more&quot; class=&quot;gel-masthead__more-menu gel-masthead__popup&quot;&gt;
  &lt;div class=&quot;gel-masthead__more-menu-inner&quot;&gt;
    &lt;h2 id=&quot;more-label&quot; aria-hidden=&quot;true&quot; class=&quot;gel-masthead__more-menu-label&quot;&gt;More&lt;/h2&gt;
    &lt;ul aria-labelledby=&quot;more-label&quot;&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/news&quot;&gt;News&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/sport&quot;&gt;Sport&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/weather&quot;&gt;Weather&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/iplayer&quot;&gt;iPlayer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/sounds&quot;&gt;Sounds&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.bbc.co.uk/cbbc&quot;&gt;CBBC&lt;/a&gt;&lt;/li&gt;
      &lt;li class=&quot;gel-masthead-more-account-link&quot;&gt;
        &lt;a href=&quot;https://account.bbc.com/account&quot;&gt;
          &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot;&gt;
            &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-sign-in&quot;&gt;&lt;/use&gt;
          &lt;/svg&gt;
          Your account
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>This contains the priority/promoted links and more. The account link is revealed under circumstances where JavaScript has not run, which would mean the links in the bar above are hidden and not available.</p>
<p>Note the <code>&lt;h2&gt;</code> heading. This is hidden from assistive technologies but used as a visual label. It becomes the group label for the list via <code>aria-labelledby</code>.</p>
<h4 id="the-notifications-element">The notifications element</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__alerts gel-masthead__popup&quot;&gt;
  &lt;h2 tabindex=&quot;-1&quot; id=&quot;gel-masthead__alerts&quot;&gt;Notifications&lt;/h2&gt;
  &lt;p&gt;No notifications right now. We'll let you know when something from your favourite programmes, artists and
    playlists is available for you.&lt;/p&gt;
  &lt;p&gt;If your notifications are turned off, you can always turn them back on. Just go to settings.&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>The navigation bar's alerts link reveals this element and sends focus to the <code>&lt;h2&gt;</code> inside it. For the <code>&lt;h2&gt;</code> to be focusable by the component's script, it must take <code>tabindex=&quot;-1&quot;</code>.</p>
<p>Both this element and the More menu are appended with close buttons so that the user can dismiss them from the interface.</p>
<pre><code class="prettyprint syntax-html">&lt;button class=&quot;gel-masthead__close-button&quot;&gt;&lt;span class=&quot;gel-sr&quot;&gt;Close&lt;/span&gt;
  &lt;svg class=&quot;gel-icon gel-icon--text&quot; aria-hidden=&quot;true&quot; focusable=&quot;false&quot; viewBox=&quot;0 0 32 32&quot;&gt; 
    &lt;use xlink:href=&quot;path/to/gel-icons-all.svg#gel-icon-no&quot;&gt;&lt;/use&gt;
  &lt;/svg&gt;
&lt;/button&gt;
</code></pre>
<h4 id="the-banner">The banner</h4>
<pre><code class="prettyprint syntax-html">&lt;div class=&quot;gel-masthead__banner&quot;&gt;
  &lt;a href=&quot;/&quot; class=&quot;gel-masthead__banner-logo&quot;&gt;
    &lt;span class=&quot;gel-sr&quot;&gt;
      Homepage
    &lt;/span&gt;
    &lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; viewBox=&quot;0 0 1101.9 202.4&quot;&gt;
      &lt;use xlink:href=&quot;path/to/logo.svg#logo&quot;&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>The banner contains the logo for the local site. This logo is also the home page link and contains the accessible label <em>&quot;BBC [local site name] homepage&quot;</em>.</p>
<h2 id="recommended-layout">Recommended layout</h2>
<p>The global navigation bar is responsive by own of three means:</p>
<ol>
<li>The priority/promoted links container has <code>overflow: hidden</code> and <code>IntersectionObserver</code> hides any links that do not intersect sufficiently with <code>visibility: hidden</code>.</li>
<li>Where <code>IntersectionObserver</code> is not supported, the priority/promoted links container is set to <code>overflow-x: auto</code>. This allows the user to scroll links into view.</li>
<li>Where there's no JavaScript, the More menu (containing the priority links and more) is revealed by default and the priority links become hidden. Links within the More menu wrap automatically.</li>
</ol>
<h3 id="icons">Icons</h3>
<p>The icons are taken from the standard <a href="http://bbc.github.io/gel-iconography/">GEL Iconography library</a>. To ensure they adopt the appropriate colour via <code>currentColor</code>, the parent sometimes needs to explicitly inherit the context's <code>color</code></p>
<pre><code class="prettyprint syntax-css">.gel-masthead a,
.gel-masthead button {
  font-size: inherit;
  color: inherit;
}
</code></pre>
<h3 id="scrollable-priority-links">Scrollable priority links</h3>
<p>In the event of <code>IntersectionObserver</code> not being supported and the priority links becoming a scrollable region, some embellishments are included to increase affordance.</p>
<p>Firstly, in webkit browsers, the scrollbar is styled. This is an opportunity to make it more in keeping with the brand, but styling it also makes it visible by default on systems where it would otherwise be invisible.</p>
<pre><code class="prettyprint syntax-css">.gel-masthead__links::-webkit-scrollbar {
  height: 0.125rem;
}

.gel-masthead__links::-webkit-scrollbar-track {
  background-color: $gel-color--alto;
}

.gel-masthead__links::-webkit-scrollbar-thumb {
  background-color: $gel-color--cod-gray;
}
</code></pre>
<p>In addition, a 'shadow' is cast from the more link over the priority links element, better communicating that the links disappear behind it. This style is included only where the priority links have not taken the <code>gel-masthead__links-observed</code> class, hence the use of the negation pseudo-class and adjacent combinator.</p>
<pre><code class="prettyprint syntax-css">.gel-masthead__links:not(.gel-masthead__links-observed) + .gel-masthead__more-option::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: -6px;
  width: 6px;
  background-color: rgba(0,0,0,0.05);
}
</code></pre>
<p>Where a user has not ascertained they can scroll the element to reveal more links, the more menu remains available and should contain all of the same options and more.</p>
<h3 id="high-contrast">High contrast</h3>
<p>How the component looks with a <a href="https://support.microsoft.com/en-gb/help/13862/windows-use-high-contrast-mode">Windows High Contrast Mode</a> theme active.</p>
<p><img src="../../static/images/hcm_masthead.png" alt="The borders become white and the background colour black"></p>
<p>Not shown in the image: supplementary outline styles for focus (since the <code>box-shadow</code> style is eliminated by Windows HCM):</p>
<pre><code class="prettyprint syntax-css">.gel-masthead__bar a:hover,
.gel-masthead__bar a:focus {
  outline: 2px solid transparent; /* for high contrast mode */
  outline-offset: -4px;
  box-shadow: inset 0 -4px 0 0 currentColor;
}
</code></pre>
<h2 id="recommended-behaviour">Recommended behaviour</h2>
<p>There are some special considerations for keyboard and screen reader usage that are not covered elsewhere in this document:</p>
<h3 id="the-priority-links">The priority links</h3>
<p>The <code>IntersectionObserver</code> script gives priority links that are not intersecting the <code>gel-masthead__link-hidden</code> class.</p>
<pre><code class="prettyprint syntax-js">if (item.intersectionRatio &gt; 0.98) {
  item.target.classList.remove('gel-masthead__link-hidden');
} else {
  item.target.classList.add('gel-masthead__link-hidden');
}
</code></pre>
<p>This styles the links with <code>visibility: hidden</code>, meaning they are invisible, not acknowledged by screen reader software, and not focusable by keyboard. Only the visible priority links take focus, followed by the more link after them.</p>
<p>Where <code>IntersectionObserver</code> is not supported and the priority links container is made scrollable, currently invisible links are brought into view as they are focused. This means no invisible content receives focus, which would have been a WCAG 2.4.3 Focus Order failure<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup>. Touch users can access the invisible links by swiping left and right.</p>
<h3 id="same-page-links">Same-page links</h3>
<p>The account and more links reveal and send focus to target elements.</p>
<pre><code class="prettyprint syntax-js">menu.link.addEventListener('click', function (e) {
  e.preventDefault();
  menus.forEach(function (otherMenu) {
    if (otherMenu !== menu) {
      otherMenu.target.style.display = 'none';
    }
  });

  var open = menu.target.style.display === 'block' || false;
  menu.target.style.display = open ? 'none' : 'block';
  if (!open) {
    menu.first.focus();
  }
});
</code></pre>
<p>It's imperative focus is managed like this because interactive elements exist between the links and their targets in the DOM. Simply revealing the elements visually would make the experience tedious for keyboard users and confusing for screen reader users.</p>
<p>The close buttons appended to each of the target elements not only allow sighted mouse users to dismiss and re-hide the content, but also allow keyboard users to move back directly to the invoking link, bypassing the intermediary interactive elements' tab stops. This is similar to the behaviour expected when closing a dialog element<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>.</p>
<pre><code class="prettyprint syntax-js">closeButton.addEventListener('click', function () {
  menu.target.style.display = 'none';
  menu.link.focus();
});
</code></pre>

                    <aside class="geltags-breakout-box geltags-breakout-box extra-padding" aria-labelledby="aside-info-link-elements-for-same-page-navigation">
                    <h4 id="aside-info-link-elements-for-same-page-navigation" aria-hidden="true"><svg class="geltags-breakout-box__icon geltags-icon geltags-icon--text"><use xlink:href="/gel/static/images/gel-icons-core-set.svg#gel-icon-info" style="fill:#404040;"></use></svg>Link elements for same-page navigation</h4><div><p>The link element is chosen for the purpose of focus relocation because screen reader users are accustomed to link elements changing their location. Each link's URL points to a <code>hash</code> fragment which corresponds to the target element's <code>id</code>. Although JavaScript—and not standard sequential navigation—moves focus in this case, URLs beginning with <code>#</code> identify the links as 'same-page' links in screen reader software, assuring the user they will not be relocated to a different page.</p>
</aside><h2 id="reference-implementation">Reference implementation</h2>

                    <aside class="geltags-breakout-box geltags-breakout-box extra-padding" aria-labelledby="aside-alert-important">
                    <h4 id="aside-alert-important" aria-hidden="true"><svg class="geltags-breakout-box__icon geltags-icon geltags-icon--text"><use xlink:href="/gel/static/images/gel-icons-core-set.svg#gel-icon-alert" style="fill:#404040;"></use></svg>Important</h4><div><p>Reference implementations are intended to demonstrate <strong>what needs to be achieved</strong>, but not necessarily how to achieve it. That would depend on the technology stack you are working with. The HTML semantics, layout, and behaviour of your implementation must conform to the reference implementation. Your JS framework, CSS methodology, and—most likely—content will differ.</p>
</aside><p><a class="gel-cta gel-long-primer-bold" href="../demos/masthead/" target="_new"><span class="gel-button__label">Open in new window</span><svg class="gel-button__icon gel-icon gel-icon--text"><use xlink:href="/gel/static/images/gel-icons-core-set.svg#gel-icon-external-link"></use></svg></a></p><h2 id="related-research">Related research</h2>
<p>This topic does not yet have any related research available.</p>
<h3 id="further-reading-elsewhere-on-the-web">Further reading, elsewhere on the Web</h3>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>ARIA Form Role — MDN, <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Form_Role">https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/Form_Role</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>CSS Background Images &amp; High Contrast Mode — Adrian Roselli, <a href="http://adrianroselli.com/2012/08/css-background-images-high-contrast-mode.html">http://adrianroselli.com/2012/08/css-background-images-high-contrast-mode.html</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>Managing Focus in SVG — Ally.js, <a href="https://allyjs.io/tutorials/focusing-in-svg.html">https://allyjs.io/tutorials/focusing-in-svg.html</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p>Keyboard Shortcuts For JAWS — WebAIM, <a href="https://webaim.org/resources/shortcuts/jaws#headings">https://webaim.org/resources/shortcuts/jaws#headings</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p>WCAG 2.1 2.4.2 Focus Order, <a href="https://www.w3.org/TR/WCAG21/#focus-order">https://www.w3.org/TR/WCAG21/#focus-order</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p>ARIA Authoring Practices: Dialog Keyboard Interaction — W3, <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#keyboard-interaction-6">https://www.w3.org/TR/wai-aria-practices-1.1/#keyboard-interaction-6</a> <a href="#fnref6" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>


                <aside class="geltags-breakout-box geltags-breakout-box extra-padding"
                    aria-labelledby="aside-info-Could-you-improve-this-documentation">
                    <h4 id="aside-info-Could-you-improve-this-documentation" aria-hidden="true">
                        <svg class="geltags-breakout-box__icon geltags-icon geltags-icon--text">
                            <use xlink:href="/gel/static/images/gel-icons-core-set.svg#gel-icon-info"
                                style="fill:#404040;"></use>
                        </svg>Could you improve this documentation?
                    </h4>
                    <div>
                        <p>
                            If you think you could make anything you see here a bit better then become one of <a
                                href="/gel/contributors/">our
                                lovely contributors</a>!
                        </p>
                    </div>
                </aside>

            </div>
        </div>
    </main>

    <div class="geltags-feedback-banner">
        <div class="gel-wrap">
            <div class="gel-layout">
                <div class="gel-layout__item gel-2/3@l gel-3/5@xl">
                    <p><small>Copyright &copy; 2021 BBC. This content is published under the Open Government Licence, unless otherwise noted.</small></p>
                </div>
            </div>
        </div>
    </div>

    <script nomodule defer type="text/javascript" src="/gel/static/js/external-svg-polyfill.js"></script>
    <script type="text/javascript" src="/gel/static/js/gel.js"></script>

    

    <script type="text/javascript">
        new Sticky('.sticky');
    </script>

    <!-- BBC ATI analytics -->
    <script type="text/javascript" src="/gel/static/js/smarttag.js"></script>

    <script type="text/javascript"> // create ATI tag and submit
    (function() {
        var url = document.URL;
        var ref = document.referrer;
        var title = document.querySelector("meta[property='og:title']").getAttribute("content").toLowerCase().split(': ');
        var siteTitle = '' + title[0].replace(/ /g, ".").replace(/[^a-zA-Z0-9.]/g, "").replace(/\.+/g, ".");
        var pageTitle = '' + title[1].replace(/ /g, "-").replace(/[^a-zA-Z0-9-]/g, "").replace(/-+/g, "-");
        pageTitle = siteTitle + '.' + pageTitle +'.page';

        var ATTag = new ATInternet.Tracker.Tag({ secure: true });

        ATTag.page.set({ name: pageTitle });

        var siteCustomVars = {
            "2": "[responsive]",
            "3": "[bbc_website]",
            "4": "[en]",
            "5": "[" + url + "]",
            "6": (ref? "[" + ref + "]" : undefined),
            "8": "[direct-hit]",
            "9": "[" + pageTitle + "]"
        };
        ATTag.customVars.set({ site: siteCustomVars });
        
        if (document.URL.match(/\/\/bbc\.github\.io\/gel/i)) {
            ATTag.dispatch();
        }
        else {
            console.log('ATI tag not sent:', siteTitle, siteCustomVars);
        }
    })();
    </script>
</body>

</html>